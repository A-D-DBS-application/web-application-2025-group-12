<!-- Profile view surfaces company account metadata for admins. -->
{% extends 'base.html' %}

{% block title %}GroundMatch â€¢ My Profile{% endblock %}

{% block content %}
{% set company_name = company.name if company is defined and company.name else 'axl' %}
{% set company_email = company.email if company is defined and company.email else 'axl@email.be' %}
{% set edit_mode = edit_mode if edit_mode is defined else False %}
<section class="stack">
  <header class="page-header">
    <div>
      <h1>My Profile</h1>
      <p class="text-muted">Manage your company information.</p>
    </div>
    {% if not edit_mode %}
      <a class="btn btn-outline" href="{{ url_for('main.profile', mode='edit') }}">Edit Profile</a>
    {% endif %}
  </header>

  {% if edit_mode %}
    <form class="stack" method="post" action="{{ url_for('main.profile', mode='edit') }}">
      <!-- csrf token placeholder -->
      <article class="profile-card">
        <div class="client-card__header">
          <div>
            <h2>Edit Company Profile</h2>
            <p class="text-muted">Update your company details and settings.</p>
          </div>
          <a class="btn btn-outline" href="{{ url_for('main.profile') }}">Cancel</a>
        </div>
        <div class="preference-grid">
          <div class="stack">
            <label for="company_name">Company Name</label>
            <input class="input" id="company_name" type="text" name="name" value="{{ company_name }}" required>
          </div>
          <div class="stack">
            <label for="company_email">Company Email</label>
            <input class="input" id="company_email" type="email" name="email" value="{{ company_email }}" required>
          </div>
        </div>
        <div class="action-row">
          <button class="btn btn-primary" type="submit">Save Changes</button>
        </div>
      </article>
    </form>
  {% else %}
    <article class="profile-card">
      <div class="client-card__header">
        <div>
          <h2>Company Profile</h2>
          <p class="text-muted">Your company details and settings</p>
        </div>
      </div>
      <div class="profile-overview">
        <div class="profile-overview__icon"><i class="bi bi-buildings"></i></div>
        <div>
          <p style="font-weight:600; margin:0;">{{ company_name }}</p>
          <p class="text-muted" style="margin:0;">Construction Company</p>
        </div>
      </div>
      <div class="profile-summary">
        <div class="profile-summary__row">
          <span class="profile-summary__icon"><i class="bi bi-envelope"></i></span>
          <div>
            <p class="text-muted">Email Address</p>
            <p>{{ company_email }}</p>
          </div>
        </div>
        <div class="profile-summary__row">
          <span class="profile-summary__icon"><i class="bi bi-hash"></i></span>
          <div>
            <p class="text-muted">Company ID</p>
            <p>{{ company.id if company is defined and company.id else 'comp_1762805541550' }}</p>
          </div>
        </div>
      </div>
    </article>
  {% endif %}

  <article class="profile-card">
    <h2>Account Information</h2>
    <p class="text-muted">Your account status and usage</p>
    <div class="info-list">
      <div class="info-item">
        <strong>Account Type</strong>
        <span>Company Account</span>
      </div>
      <div class="info-item">
        <strong>Member Since</strong>
        <span>November 2025</span>
      </div>
      <div class="info-item">
        <strong>Status</strong>
        <span class="badge-status success">Active</span>
      </div>
    </div>
  </article>
</section>
{% endblock %}
