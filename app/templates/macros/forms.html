{# ===========================================================================
   REUSABLE FORM MACROS
   
   This file contains Jinja2 macros for commonly used form patterns to eliminate
   HTML duplication across templates. Import these macros at the top of any
   template that needs them.
   
   Usage:
   {% from 'macros/forms.html' import form_label, form_input, form_row_2col %}
   
   NOTE: All styling is done via CSS classes defined in global.css.
   No inline styles are used.
   =========================================================================== #}

{# Standard form label with optional required indicator #}
{% macro form_label(text, required=False, size='') %}
<label class="form-label{% if size %} form-label-{{ size }}{% endif %}">
    {{ text }}
    {% if required %}<span class="text-danger">*</span>{% endif %}
</label>
{% endmacro %}

{# Standard text/email/number input #}
{% macro form_input(name, type="text", placeholder="", value="", required=False, step=None, size='') %}
<input type="{{ type }}" 
       name="{{ name }}" 
       placeholder="{{ placeholder }}"
       value="{{ value }}"
       class="form-input{% if size %} form-input-{{ size }}{% endif %}"
       {% if step %}step="{{ step }}"{% endif %}
       {% if required %}required{% endif %}>
{% endmacro %}

{# Standard select dropdown #}
{% macro form_select(name, options, selected="", placeholder="", required=False) %}
<select name="{{ name }}" 
        class="form-input"
        {% if required %}required{% endif %}>
    {% if placeholder %}
    <option value="">{{ placeholder }}</option>
    {% endif %}
    {% for option in options %}
    <option value="{{ option }}" {% if selected == option %}selected{% endif %}>
        {{ option.replace('_', ' ').title() }}
    </option>
    {% endfor %}
</select>
{% endmacro %}

{# Form field wrapper (label + input) #}
{% macro form_field(label_text, name, type="text", placeholder="", value="", required=False, step=None) %}
<div class="form-field">
    {{ form_label(label_text, required) }}
    {{ form_input(name, type, placeholder, value, required, step) }}
</div>
{% endmacro %}

{# Two-column grid for min/max inputs #}
{% macro form_row_2col(field1_label, field1_name, field1_value, field2_label, field2_name, field2_value, type="number", step=None, placeholder1="", placeholder2="") %}
<div class="form-row-2col">
    <div>
        {{ form_label(field1_label) }}
        {{ form_input(field1_name, type, placeholder1, field1_value, False, step) }}
    </div>
    <div>
        {{ form_label(field2_label) }}
        {{ form_input(field2_name, type, placeholder2, field2_value, False, step) }}
    </div>
</div>
{% endmacro %}

{# Page header with title, subtitle, and action buttons #}
{% macro page_header(title, subtitle="", back_url="", back_text="Back to dashboard", extra_buttons=[]) %}
<div class="page-header">
    <div class="page-header-content">
        <h1 class="page-header-title">{{ title }}</h1>
        {% if subtitle %}
        <div class="page-header-subtitle muted">{{ subtitle }}</div>
        {% endif %}
    </div>
    {% if back_url or extra_buttons %}
    <div class="page-header-actions">
        {% if back_url %}
        <a href="{{ back_url }}" class="btn">{{ back_text }}</a>
        {% endif %}
        {% for button in extra_buttons %}
        {{ button|safe }}
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endmacro %}

{# Form action buttons (Save/Cancel pattern) #}
{% macro form_actions(submit_text="Save Changes", cancel_url="", cancel_text="Cancel") %}
<div class="form-actions-row">
    <button type="submit" class="btn btn-success">{{ submit_text }}</button>
    {% if cancel_url %}
    <a href="{{ cancel_url }}" class="btn">{{ cancel_text }}</a>
    {% endif %}
</div>
{% endmacro %}
