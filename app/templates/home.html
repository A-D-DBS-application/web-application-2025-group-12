{% extends "base.html" %}
{% block content %}
<div style="text-align:center;margin-bottom:24px">
    <h1 style="margin:0 0 12px">Welcome to GroundMatch</h1>
    <p class="muted" style="margin:0 0 24px">Connect your clients with the perfect building plots. Streamline your construction business with intelligent matching.</p>

    <div style="background:var(--gm-bg);border-radius:20px;padding:24px;display:inline-block;margin:0 auto">
        <div style="margin-bottom:12px;width:100%">
            <a href="{{ url_for('company_register') }}" class="btn btn-success" style="width:100%;display:inline-block;text-align:center;padding:12px 24px">Create Account</a>
        </div>
        <div style="display:flex;gap:12px;justify-content:center">
            <a href="{{ url_for('company_login') }}" class="btn" style="padding:12px 24px;flex:1">Company Login</a>
            <a href="{{ url_for('client_login') }}" class="btn" style="padding:12px 24px;flex:1">Client Login</a>
        </div>
    </div>
</div>

<div class="card" style="margin-top:18px">
    {% if matches is defined and matches %}
        <h3 style="margin-top:0">Recent Accepted Matches</h3>
        <table>
            <thead>
                <tr><th>Client</th><th>Location</th><th>Surface Area</th><th>Budget</th><th>Score</th></tr>
            </thead>
            <tbody>
            {% for match in matches|selectattr('status', 'equalto', 'accepted')|list %}
                {% if loop.index <= 5 %}
                <tr>
                    <td>{{ match.client.name if match.client else 'N/A' }}</td>
                    <td>{{ match.ground.location }}</td>
                    <td>{{ match.ground.m2 }} m²</td>
                    <td>€{{ match.ground.budget }}</td>
                    <td><strong>{{ match.total_score if match.total_score is defined else ((match.budget_score or 0) + (match.m2_score or 0) + (match.location_score or 0))|round(2) }}</strong></td>
                </tr>
                {% endif %}
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <h3 style="margin-top:0">How it works</h3>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px">
            <div class="card"><strong>Manage Clients</strong><div class="muted">Keep track of all your clients and preferences</div></div>
            <div class="card"><strong>Browse Plots</strong><div class="muted">Search through available building plots</div></div>
            <div class="card"><strong>Smart Matching</strong><div class="muted">Get intelligent matches based on preferences</div></div>
        </div>
    {% endif %}
</div>

{% endblock %}
